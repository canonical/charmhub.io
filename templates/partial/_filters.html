<div class="p-layout__sidenav">
  <div class="p-filter" data-js="filter-handler">
    <div class="p-filter__title" data-filters="applied-filters">
      Filters
    </div>
    <form>
      <div class="p-filter__scroll-box">
        {% if categories %}
        <ul class="p-filter__list" style="margin-block-end: 1rem;">
          <li class="p-filter__item--title">
            Categories
          </li>
          <li class="p-filter__item" data-filter-type="category" data-js="filter" data-filter-value="featured" tabindex="0">
            <input type="checkbox" id="featured" value="featured" {% if active_filter('category', 'featured') %}checked{% endif %} tabindex="-1">
            <label for="featured" tabindex="-1">Featured</label>
          </li>
          {% for category in categories %}
          {% if not category["slug"] in ["other", "featured"] %}
          <li class="p-filter__item" data-filter-type="category" data-js="filter" data-filter-value="{{ category.slug }}" tabindex="0">
            <input type="checkbox" id="{{ category.slug }}" value="{{ category.slug }}" {% if active_filter('category', category.slug) %}checked{% endif %} tabindex="-1">
            <label for="{{ category.slug }}" tabindex="-1">{{ category.name }}</label>
          </li>
          {% endif %}
          {% endfor %}
          <li class="p-filter__item" data-filter-type="category" data-js="filter" data-filter-value="other" tabindex="0">
            <input type="checkbox" id="other" value="other" {% if active_filter('category', 'other') %}checked{% endif %} tabindex="-1">
            <label for="other" tabindex="-1">other</label>
          </li>
        </ul>
        {% endif %}
      </div>
      <noscript>
        <button type="submit" class="u-hide--small">Apply Filters</button>
      </noscript>
      <div class="p-filter__controls">
        <button type="reset" class="p-button--neutral" data-js="filter-reset">Reset</button>
        <button class="p-button--positive" data-js="filter-submit">Show results ({{ results|length }})</button>
      </div>
    </form>
  </div>
  <div class="p-filter u-no-padding--top">
    <ul class="p-filter__list has-links">
      <li class="p-filter__item--title u-sv1">
        Useful links
      </li>
      <li class="p-filter__item">
        <a href="/about" class="u-sv1">What is an operator?</a>
      </li>
      <li class="p-filter__item">
        <a href="/publishing" class="u-sv1">How do I publish here?</a>
      </li>
      <li class="p-filter__item">
        <a href="/glossary" class="u-sv1">Glossary</a>
      </li>
    </ul>
  </div>
</div>

<div class="p-layout__main">
  <div class="p-layout__filter-container">
    <div class="p-layout__left">
      <div class="p-muted-heading" data-js="filtered-items">
        Showing {{ results|length }} of {{ total_charms }} items
      </div>
      <div class="p-layout__sort-mobile">
        <a href="/" data-js="mobile-platform-reveal-button" class="has-icon p-store__button is-always-color-link"><i class="p-icon--filter"></i>Platforms</a>
        <a href="/" data-js="mobile-filter-reveal-button" class="has-icon p-store__button is-always-color-link"><i class="p-icon--filter"></i>Filters</a>
      </div>
    </div>
    <div class="p-layout__right">
      <form action="/" class="p-search-box p-layout__search u-hide--medium u-hide--large" data-js="search-handler-mobile">
        <input type="search" class="p-search-box__input" name="q" aria-label="Search Charmhub" placeholder="Search Charmhub" {% if q %}value="{{ q }}" {% endif %} required />
        <button type="reset" class="p-search-box__reset"><i class="p-icon--close">Clear</i></button>
        <button type="submit" class="p-search-box__button" alt="Search"><i class="p-icon--search">Search</i></button>
      </form>
      <form class="p-form p-form--inline">
        <div class="p-layout__sort-desktop p-form__group">
          <label for="platform" aria-label="Filter platforms" class="p-form__label">Platforms</label>
          <select name="platform" data-js="platform-handler" class="p-form__control" value="{{ platform }}" id="platform">
            <option value="all" {% if active_filter('platform', 'all') %}selected{% endif %}>All</option>
            <option value="linux" {% if active_filter('platform', 'linux') %}selected{% endif %}>Linux</option>
            <option value="kubernetes" {% if active_filter('platform', 'kubernetes') %}selected{% endif %}>Kubernetes</option>
          </select>
        </div>
      </form>
    </div>
  </div>
  <div class="p-layout__card-container" data-js="card-container">
    {% if results %}
      {% for package in results %}
        {% if package["type"] == "charm" %}
          {% include "partial/_entity-card.html" %}
        {% endif %}
      {% endfor %}
    {% else %}
      <div class="p-notification--information">
          <p class="p-notification__response">
            We couldn't find anything for your search{% if q %} "<strong>{{ q }}</strong>"{% endif %}.
          </p>
      </div>
    {% endif %}
  </div>

  <div class="u-align--center" style="margin-top: 1rem;">
    <a href="?category=all" class="p-button--positive u-hide" id="more-operators">See more operators</a>
  </div>
</div>
